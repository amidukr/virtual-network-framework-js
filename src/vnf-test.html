<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>QUnit Example</title>
    <link rel="stylesheet" href="css/qunit-2.1.1.css">
</head>
<body>
<div id="qunit"></div>
<div id="qunit-fixture"></div>
<script src="lib/qunit-2.1.1.js"></script>
<script data-main="vnf-test.js" src="lib/require.js"></script>

<script type="text/javascript">
    Timeouts = {}
    TestingProfiles = {}

    var TESTING_LEVEL_SMOKE = 0;
    var TESTING_LEVEL_RELEASE = 1;
    var TESTING_LEVEL_DEBUG = 2;
    var TESTING_LEVEL_STRESS = 3;

    TestingProfiles = {
        rate: 1,
        qunitTestTimeout: 3000,
        logCaptureTimeout: 3000,
        testLevel: TESTING_LEVEL_SMOKE,

        reliableFastHeartbeatInterval: 20,
        reliableFastConnectionInvalidateInterval: 200,
        reliableFastConnectionLostTimeout: 600,
        reliableFastHandshakeRetryInterval: 60,
        reliableFastKeepAliveHandshakingChannelTimeout: 240,

        reliableRtcHeartbeatInterval: 1,
        reliableRtcConnectionInvalidateInterval: 10,
        reliableRtcConnectionLostTimeout: 100,
        reliableRtcHandshakeRetryInterval: 10,
        reliableRtcKeepAliveHandshakingChannelTimeout: 100,

        //activeTestingLevel: TESTING_LEVEL_SMOKE,
        activeTestingLevel: TESTING_LEVEL_RELEASE,
        //activeTestingLevel: TESTING_LEVEL_DEBUG,
        //activeTestingLevel: TESTING_LEVEL_STRESS,

        "root:InMemory": {
            rate: 2,
            testLevel: TESTING_LEVEL_SMOKE
        },

        "root:Rtc": {
            rate: 50,
            testLevel: TESTING_LEVEL_DEBUG
        },

        "root:ReliableRtc": {
            rate: 100,

            testLevel: TESTING_LEVEL_RELEASE,

            qunitTestTimeout:  30000,
            logCaptureTimeout: 30000
        },

        toAbsoluteInterval: function(profile, timePoints) {
            if(!timePoints) return;

            var rate = TestingProfiles.getValue(profile, "rate");
            return rate * timePoints;
        },

        getInterval: function(profile, config) {
            var profileConfigurations = TestingProfiles[profile];
            var defaultPointsValue = TestingProfiles[config];

            var defaultInterval = TestingProfiles.toAbsoluteInterval(profile, defaultPointsValue);

            return (profileConfigurations && profileConfigurations[config]) || defaultInterval;
        },

        getValue: function(profile, config) {
            var profileConfigurations = TestingProfiles[profile];

            if(!profileConfigurations) {
                return TestingProfiles[config];
            }

            return profileConfigurations[config] != undefined ? profileConfigurations[config] : TestingProfiles[config];
        }
    }

    QUnit.config.testTimeout = TestingProfiles.qunitTestTimeout;
    Timeouts.logCaptureTimeout = TestingProfiles.logCaptureTimeout;


    Timeouts.iceSendTimeout = Math.min(Timeouts.logCaptureTimeout/10, 1000);
</script>


</body>
</html>